

### 定义

> http 103 状态码 是一个信息性的 HTTP状态码, 用于在最终响应之前发送一个初步的 HTTP响应.
>
> `Early Hints` 可以通过提前做一些工作``(在等待html响应同时 就去提前把重要的静态资源文件js / css/ 图片或者字体加载回来)``来帮助浏览器利用这种 `服务器思考时间`，从而提升页面的渲染性能。
>
> ``服务器思考时间``大型网站的服务器在收到一个请求后可能执行的操作比较多,服务器执行操作的这段时间叫做服务器思考时间.会带来额外的延迟 

### 优势

>  返回页面资源(JS / CSS ....)时间早于主页面资源(HTML)

####  使用场景

1. SSR项目


#### 如何使用

1: 确定主页面

2: 确定那些资源使用preload prefetch

3: 避免选择已经过时的 ,经常更新的,带有hash的或者不再被主页面使用的资源

4: 服务端要查找支持 **Early Hints** 的资源,发送给浏览器并且响应103状态码

5: 主页面准备好后，再按照正常的响应进行响应。为了向后兼容，最好在最终响应中包含 `LINK HTTP` 标头，甚至也可以增加在生成主页面时需要的一些明显的关键资源。

####  与http2.0 server push的关系

##### Server push的缺陷:

`Server Push` 很难避免服务器推送浏览器已经拥有的子资源，其实很多资源在浏览器第一次请求到就已经缓存下来了。这种 “过度推动” 会导致网络带宽的使用效率降低，从而显着阻碍性能优势。总体而言，`Chrome` 数据显示 `HTTP2/Push` 实际上对整个网络的性能产生了负面影响。

**Early Hints**

 在实践中表现更好. 浏览器实际上只负责获取它实际需要的资源,解决了网络带宽浪费问题

#### 服务器支持情况

- `Node.js`：通过 `Fastify` 插件提供支持；
- `Apache`：通过 `mod_http2` 支持；
- `H2O`：支持；
- `Nginx`：实验模块。