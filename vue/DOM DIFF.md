## DOM DIFF

### 虚拟 DOM

- what

  - 用对象的形式将每个 DOM 节点的信息模拟出来

  ```
  *     vue 是在模板上面修改的节点，一旦表示 DOM 节点的信息发生变化，就会产生新的 DOM，新旧 DOM 对比，打补丁，更新 DOM被修改部分。

      *     用 render 函数将 DOM 渲染出来

  特点 ： 先序（从 0 开始往上增加）深度遍历

  * 平级对比
     1: 节点类型变了， 直接用新节点替换旧节点
     2： 节点类型相同 仅仅是属性值改变 触发节点更新
     3： 文本修改， 直接修改文本内容即可
     4： 子节点变动 updateChildren（)
  * 每个 DOM 有自己的索引编号
  * 从上往下，深度优先
  * 复用交替原则
  * 每一个虚拟节点 里面有 type， props， children
  * 比较新旧 DOM 的差异  type， props， children： 修改了那个属性，修改后的值为啥，
  * walk 遍历递归，打补丁
  ```

- useful
- how does it work

### diff

- 对比两个虚拟节点，找出差异，对应到真实 DOM 上面，打补丁，找到差异，以最小的性能消耗去修改 DOM

#### 虚拟 dom 的优点

- 原生 Dom 操作 数据变化的计算量不管是 JS 还是 Dom 操作都和整个界面的大小相关
- 虚拟 DOM + DIFF 操作使得 数据变化的计算量只有 JS 是个界面大小相关，DOM 操作是和数据的变动量相关的
- 总结： 不管数据变化多少 每次重绘的性能都是可以接受的
- 尤雨溪认为： 1： 虚拟 DOM 为函数式 UI 编程打开了大门 2: 可以渲染到 DOM 以外的 backend
